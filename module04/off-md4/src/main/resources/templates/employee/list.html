<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/home :: header">
    <meta charset="UTF-8">
    <title>Employee List</title>
</head>

<body>
<div th:replace="/home :: head"></div>
<div th:replace="/home :: navbar"></div>

<div class="row" style="background: #48D1CC">
    <div class="col-4">
        <p>
            <a class="btn btn-success" th:href="@{/employee/create}">
                Add new Employee
            </a>
        </p>
    </div>
    <div class="col-3"></div>
    <div class="col-5">

        <form th:action="@{/employee/search}">
            <div class="row-search">
                <input type="text" th:value="${searchAll}" class="form-control rounded " name="searchAll" placeholder="search All" aria-label="Search"
                       aria-describedby="search-addon" style="width: 405px"/>
                <button type="submit" class="btn btn-info" style="width: 405px">Search</button>
            </div>
        </form>
    </div>
</div>


<div>
    <div class="notify">
        <div th:if="${success}">
            <h3 th:text="${success}" style="color: blue"></h3>
        </div>
    </div>
    <table class="table table-striped table-bordered" id="employees">
        <thead>
        <tr class="bg-success">
            <th><input type="checkbox" id="delete-all-idx"/></th>
            <td>ID</td>
            <td>Name</td>
            <td>DateOfBirth</td>
            <td>Id Card</td>
            <td>Salary</td>
            <td>Phone Number</td>
            <td>Email</td>
            <td>Address</td>
            <td>Position</td>
            <td>Education Degree</td>
            <td>Division</td>
            <td>Action</td>

        </tr>
        </thead>
        <tbody>
        <form th:action="@{/employee/deleteAll}" method="get">
        <tr th:each="row,rowStat : ${employeeList}" th:object="${row}">
            <td><input  type="checkbox" th:value="${row.id}"  th:name="delete-idx" class="delete-all"></td>
            <td th:text="*{id}"></td>
            <td th:text="${row.name}"></td>
            <td th:text="${#dates.format(row.dateOfBirth,'dd/MM/yyyy')}"></td>
            <td th:text="${row.idCard}"></td>
            <td th:text="${#numbers.formatCurrency(row.salary)}"></td>
<!--            <p th:text="${#numbers.sequence(row.salary, '###,###,### VND')}"></p>-->
            <td th:text="${row.phoneNumber}"></td>
            <td th:text="${row.email}"></td>
            <td th:text="${row.address}"></td>
            <td th:text="${row.position.positionName}"></td>
            <td th:text="${row.educationDegree.educationDegreeName}"></td>
            <td th:text="${row.division.divisionName}"></td>
            <td><a class="btn btn-success" th:href="@{/employee/edit/{id}(id=${row.id})}">Update</a>
<!--                <button type="button" class="btn btn-danger"  th:attr="data-name=${row.name}, data-id=${row.id}"-->
<!--                        data-toggle="modal" data-target="#exampleModal">-->
<!--                    Delete-->
<!--                </button>-->
<!--                <a class="btn btn-primary" th:href="@{/facility/view/{id}(id=${row.id})}">View</a>-->
<!--            </td>-->
        </tr>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-danger"  data-toggle="modal" data-target="#exampleDeleteAll">
                Delete checkbox
            </button>
            <!--Modal del all-->
            <div class="modal fade" id="exampleDeleteAll" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleLabel">Delete All</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            Bạn sẽ xoá những người này?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <button type="submit" class="btn btn-primary" >Đồng ý</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        </tbody>
    </table>
</div>
<!--phân trang-->
<div style="text-align: center;">
    <span>
    <a class="btn btn-primary" th:if="${employeeList.hasPrevious()}" th:href="@{/employee/list(page=${employeeList.number - 1})}">
        Previous
    </a>
</span>

    <span th:each="pageNo : ${#numbers.sequence(0,employeeList.totalPages  - 1) }">
        <a class="btn btn-primary" th:href="@{/employee/list(page= ${pageNo})}" th:text="${pageNo}"></a>
    </span>
    <span>
    <a class="btn btn-primary" th:if="${employeeList.hasNext()}" th:href="@{/employee/list(page=${employeeList.number + 1})}">
        Next
    </a>
</span>
</div>

<script>
    $(document).ready(function (){
        $("#delete-all-idx").click(function () {
            if ($(this).prop("checked")) {
                $(".delete-all").prop("checked", true);
            } else {
                $(".delete-all").prop("checked", false);
            }
        })
    });
</script>

<div th:replace="/home :: footer"></div>
</body>
</html>