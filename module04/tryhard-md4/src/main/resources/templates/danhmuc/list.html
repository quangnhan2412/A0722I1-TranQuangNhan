<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/home :: header">
    <meta charset="UTF-8">
    <title>Tin Tức List</title>
</head>

<body>
<div th:replace="/home :: head"></div>
<div th:replace="/home :: navbar"></div>

<div class="row" style="background: #48D1CC">
    <div class="col-4">
        <p>
            <a class="btn btn-success" th:href="@{/danhmuc/create}">
                Add new Tin Tức
            </a>
        </p>
    </div>
    <div class="col-3">

    </div>
    <div class="col-5">

        <form th:action="@{/danhmuc/search}">
            <div class="row-search">
                <input type="text" th:value="${searchAll}" class="form-control rounded " name="searchAll" placeholder="search All" aria-label="Search"
                       aria-describedby="search-addon" style="width: 405px"/>
                <button type="submit" class="btn btn-info" style="width: 405px">Search</button>
            </div>
        </form>
    </div>
</div>


<div>
    <div class="notify">
        <div th:if="${success}">
            <h3 class="alert alert-primary"  th:text="${success}" style="color: blue"></h3>
        </div>
    </div>
    <table class="table table-striped table-bordered" id="employees">
        <thead>
        <tr class="bg-success">
            <td>STT</td>
            <td>Tiêu đề</td>
            <td>Danh Mục</td>
            <td>Ngày đăng tin</td>
            <td>Phóng Viên</td>
            <td>Action</td>

        </tr>
        </thead>
        <tbody>
        <tr th:each="row : ${tinTucList}" th:object="${row}">
            <td th:text="${row.id}"></td>
            <td th:text="${row.tieuDe}"></td>
            <td th:text="${row.danhMuc.danhMucName}"></td>
            <td th:text="${#dates.format(row.ngayDangTin,'dd/MM/yyyy')}"></td>
            <td th:text="${row.phongVien}"></td>
<!--            <td><a class="btn btn-success" th:href="@{/templates/danhmuc/edit/{id}(id=${row.id})}">Update</a>-->
            <td>
            <button type="button" class="btn btn-danger"  th:attr="data-name=${row.tieuDe}, data-id=${row.id}"
                    data-toggle="modal" data-target="#exampleModal">
                Delete
            </button>
                <a class="btn btn-primary" th:href="@{/danhmuc/view/{id}(id=${row.id})}">View</a>

            </td>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<!--phân trang-->
<!--<div style="text-align: center;">-->
<!--    <span>-->
<!--    <a class="btn btn-primary" th:if="${employeeList.hasPrevious()}" th:href="@{/templates/danhmuc/list(page=${employeeList.number - 1})}">-->
<!--        Previous-->
<!--    </a>-->
<!--</span>-->

<!--    <span th:each="pageNo : ${#numbers.sequence(0,employeeList.totalPages  - 1) }">-->
<!--        <a class="btn btn-primary" th:href="@{/templates/danhmuc/list(page= ${pageNo})}" th:text="${pageNo}"></a>-->
<!--    </span>-->
<!--    <span>-->
<!--    <a class="btn btn-primary" th:if="${employeeList.hasNext()}" th:href="@{/templates/danhmuc/list(page=${employeeList.number + 1})}">-->
<!--        Next-->
<!--    </a>-->
<!--</span>-->
<!--</div>-->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Delete Facility</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form th:action="@{/danhmuc/delete}" method="get">
                    <div class="modal-body">
                        <input type="hidden" th:name="ids" th:id="id-in-modal" >
                        <p> Bạn có muốn xóa tiêu đề : <strong id="name-in-modal"></strong></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                        <button type="submit" class="btn btn-primary">Đồng ý</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function (){
        $("#delete-all-idx").click(function () {
            if ($(this).prop("checked")) {
                $(".delete-all").prop("checked", true);
            } else {
                $(".delete-all").prop("checked", false);
            }
        })
    });

    $('#exampleModal').on('show.bs.modal', function (event) {
        let button = $(event.relatedTarget) // Button that triggered the modal
        let id = button.data('id') // Extract info from data-* attributes
        let name = button.data('name')
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        let modal = $(this)
        modal.find('#id-in-modal').val(id)
        modal.find('#name-in-modal').html(name)
    });
</script>

<div th:replace="/home :: footer"></div>
</body>
</html>